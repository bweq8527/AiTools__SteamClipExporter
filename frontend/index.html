<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Steam 录像转换器</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="wrapper">
        <div class="log-sidebar">
            <div class="log-item">
                <div class="log-name front-color">[FRONTEND_LOG]</div>
                <div id="l-front" class="terminal"></div>
            </div>
            <div class="log-item">
                <div class="log-name ffmpeg-color">[FFMPEG_LOG]</div>
                <div id="l-ffmpeg" class="terminal"></div>
            </div>
            <div class="log-item">
                <div class="log-name py-color">[PYTHON_LOG]</div>
                <div id="l-py" class="terminal"></div>
            </div>
        </div>

        <div class="main-content">
            <div class="box path-box" style="gap: 10px;">
                <div class="path-group">
                    <input type="text" id="p" placeholder="请选择或输入 Steam 录制库路径...">
                    <button style="background:#454545" onclick="browse('p')">选择素材目录</button>
                    <button onclick="setP()">开始扫描</button>
                </div>
                <div class="path-group">
                    <input type="text" id="ep" placeholder="自定义视频导出位置 (可选)...">
                    <button style="background:#454545" onclick="browse('ep')">选择导出目录</button>
                    <button style="background:#2e7d32" onclick="openExportDir()">打开导出文件夹</button>
                </div>
                <p id="msg" style="color:#4caf50; margin-top: 5px; font-size: 13px;"></p>
            </div>
            
            <div class="bottom-grid">
                <div class="box">
                    <div style="display:flex; justify-content: space-between; align-items: center;">
                        <span style="font-weight: bold;">待处理素材库</span>
                        <button id="qBtn" onclick="addQ()" disabled>批量转换所选</button>
                    </div>
                    <div class="scroll-area">
                        <div id="list" class="list"></div>
                    </div>
                </div>
                
                <div class="box">
                    <span style="font-weight: bold;">任务实时监控</span>
                    <div style="height: 150px; margin-top: 15px; flex-shrink:0;">
                        <canvas id="chart"></canvas>
                    </div>
                    <div class="scroll-area" id="qList"></div>
                </div>
            </div>
        </div>
    </div>
    <script src="script.js"></script>
</body>
</html>